FROM mongo:8

#RUN openssl rand -base64 756 /data/keyfile
RUN echo "xF1sy/by2W8oCacLrpTBvuGnrsiYW0jAMR9ADeRay1z7hmeTVJWFPLkJ0BT2+SeZZVx3zUR1ZRNOzl3ffJcZTrCZh1oPaguNa5LBghlmRsbKh7f+iEbHePN5nx9DPOCpW6FpxxHV66FEPPUDHtUbkRIrxSdNFQL3k18SN7VNLZ6tfQ5HVxaNI54m3Uyle6gDFSJpVXtElF+ixq7rXdvniReg8Xz3+rvWQJ0zFuqylerbL1x3elJdCu4F7smLALpCFaa8SxPl7VrBqLEfF1Q0r/L7g97A5qiQuf6jcPxmKYQ5cL/6HuF32lcwb0vdhkeTzHrO0C3RUNp/yPDBTUatsJJJOEAdiBu0UZYxgsWHoGPk+80GFjO4zDuRUr8eOxQFHzf1DL8w8FxfuVotCXjfLZIIwXuqCfeZ/lHLF6D4YG31RLWpVfNq2iTsOB4D1FTBPa7g8nVCkFjJHOsmu4sepig6CpxqJuzvcTLBLtWKi2RKk3QW8stjQqlwPuIbl7/ciALZoGkL+YjU/wLrl7l/RtRGaYc49GX1SeLzYq6fSIsSKeVQaHOYEz+Cirqhz0U7RLt3PjXBIaozZIRiNBFniluI9jJq5jWYE5FKLXFoNbXa2ryOus6CV7c0zTlk+wdU9Lfsd3B9kMZSD1hcoQ6fScoWWOU3uo4HNkzWrrmwz6Tsdt82bcQHNRLconVPxHJeESzZJ5uOabhHep9sv5XTlo9N9dku3CBycAHsx5aulf5Hsdw7aYyqLy7GgSzko0NLHiTEDv8boY64px4oyqEywQnJCxIwGlEkvEPdnGAci61qSeuFTKwqpsm28vID/gJIixJeGC60XVsNK2Wt9rXl+imlXTqbmq5B+ufImtRLp/P8mppxWMMQZI1QlVDBbLLT/2glmYSlEiKTtzXbBpjrdIQ5ZRyCJEaWRkP3MJPeI+xtUOMsCOep5w/d8cRtRCmdlTnKUtsqG/q9zg2sz3GxTcX3klXrjwzxwBVuPbhNt5OJL2gC" > /data/keyfile
RUN chmod 400 /data/keyfile
RUN chown 999:999 /data/keyfile
RUN ls -al /data/keyfile

ENTRYPOINT ["docker-entrypoint.sh"]
EXPOSE 27017

CMD ["mongod"]
